(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.measureText=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":2}],2:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:7}],3:[function(require,module,exports){var nativeGetPrototype=Object.getPrototypeOf;function getPrototype(value){return nativeGetPrototype(Object(value))}module.exports=getPrototype},{}],4:[function(require,module,exports){function isHostObject(value){var result=false;if(value!=null&&typeof value.toString!="function"){try{result=!!(value+"")}catch(e){}}return result}module.exports=isHostObject},{}],5:[function(require,module,exports){function isObjectLike(value){return!!value&&typeof value=="object"}module.exports=isObjectLike},{}],6:[function(require,module,exports){var getPrototype=require("./_getPrototype"),isHostObject=require("./_isHostObject"),isObjectLike=require("./isObjectLike");var objectTag="[object Object]";var objectProto=Object.prototype;var funcToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectCtorString=funcToString.call(Object);var objectToString=objectProto.toString;function isPlainObject(value){if(!isObjectLike(value)||objectToString.call(value)!=objectTag||isHostObject(value)){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}module.exports=isPlainObject},{"./_getPrototype":3,"./_isHostObject":4,"./isObjectLike":5}],7:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],8:[function(require,module,exports){(function(global,factory){if(typeof define==="function"&&define.amd){define(["exports","./utils","lodash/isPlainObject","debug"],factory)}else if(typeof exports!=="undefined"){factory(exports,require("./utils"),require("lodash/isPlainObject"),require("debug"))}else{var mod={exports:{}};factory(mod.exports,global.utils,global.isPlainObject,global.debug);global.index=mod.exports}})(this,function(exports,_utils,_isPlainObject,_debug){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.width=width;exports.maxFontSize=maxFontSize;var _isPlainObject2=_interopRequireDefault(_isPlainObject);var _debug2=_interopRequireDefault(_debug);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}try{var ctx=document.createElement("canvas").getContext("2d")}catch(error){(0,_debug2.default)("measure-text:init")(error.message||error);throw new Error("Canvas support required")}function parseOptions(options){if(options&&(0,_utils.isElement)(options)){return{element:options}}else if(options&&(0,_utils.isElement)(options.element)){return options}throw new Error("Missing element")}function width(text,options){var debug=(0,_debug2.default)("measure-text:width");options=parseOptions(options);var style=(0,_utils.getStyle)(options);var styledText=(0,_utils.getStyledText)(text,style);ctx.font=(0,_utils.prop)(options,"font",null)||(0,_utils.getFont)(style,options);debug("Font declaration:",ctx.font);var metrics=ctx.measureText(styledText);debug(styledText,metrics.width+"px");return metrics.width}function maxFontSize(text,options){var debug=(0,_debug2.default)("measure-text:max-font-size");options=parseOptions(options);options.style=(0,_utils.getStyle)(options);var compute=function compute(size){options["font-size"]=size+"px";return width(text,options)};var max=parseInt((0,_utils.prop)(options,"width")||(0,_utils.prop)(options.element,"offsetWidth",0),10);debug("Computing maxFontSize for width: "+max);var size=Math.floor(max/2);var cur=compute(size);debug("1st round:",size+"px",cur);size=Math.floor(size/cur*max);cur=compute(size);debug("2nd round:",size+"px",cur);if(Math.ceil(cur)===max){debug("Computed: "+size+"px");return size+"px"}if(cur>max&&size>0){while(cur>max&&size>0){cur=compute(size--);debug("following round:",size+"px",cur)}debug("Computed: "+size+"px");return size+"px"}else{while(cur<max){cur=compute(size++);debug("following round:",size+"px",cur)}size--;debug("Computed: "+size+"px");return size+"px"}}})},{"./utils":9,debug:1,"lodash/isPlainObject":6}],9:[function(require,module,exports){(function(global,factory){if(typeof define==="function"&&define.amd){define(["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{var mod={exports:{}};factory(mod.exports);global.utils=mod.exports}})(this,function(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFont=getFont;exports.isCSSStyleDeclaration=isCSSStyleDeclaration;exports.canGetComputedStyle=canGetComputedStyle;exports.isElement=isElement;exports.getStyle=getStyle;exports.getStyledText=getStyledText;exports.prop=prop;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};function getFont(style,options){var font=[];var fontStyle=prop(options,"font-style",style.getPropertyValue("font-style"));if(["normal","italic","oblique"].indexOf(fontStyle)!==-1){font.push(fontStyle)}var fontVariant=prop(options,"font-variant",style.getPropertyValue("font-variant"));if(["normal","small-caps"].indexOf(fontVariant)!==-1){font.push(fontVariant)}var fontWeight=prop(options,"font-weight",style.getPropertyValue("font-weight"));if(["normal","bold","bolder","lighter",100,200,300,400,500,600,700,800,900].indexOf(fontWeight)!==-1){font.push(fontWeight)}var fontSize=prop(options,"font-size",style.getPropertyValue("font-size"));if(/r?em/.test(fontSize)){fontSize=parseInt(fontSize,10)*16+"px"}font.push(fontSize);var fontFamily=prop(options,"font-family",style.getPropertyValue("font-family"));font.push(fontFamily);return font.join(" ")}function isCSSStyleDeclaration(val){return val&&typeof val.getPropertyValue==="function"}function canGetComputedStyle(el){return el&&el.style&&typeof window!=="undefined"&&typeof window.getComputedStyle==="function"}function isElement(o){return(typeof HTMLElement==="undefined"?"undefined":_typeof(HTMLElement))==="object"?o instanceof HTMLElement:o&&(typeof o==="undefined"?"undefined":_typeof(o))==="object"&&o!==null&&o.nodeType===1&&typeof o.nodeName==="string"}function getStyle(options){if(isCSSStyleDeclaration(options.style)){return options.style}var el=options&&isElement(options.element)&&options.element;if(canGetComputedStyle(el)){return window.getComputedStyle(el,prop(options,"pseudoElt",null))}return{getPropertyValue:function getPropertyValue(){return""}}}function getStyledText(text,style){switch(style.getPropertyValue("text-transform")){case"uppercase":return text.toUpperCase();case"lowercase":return text.toLowerCase();default:return text}}function prop(src,attr,defaultValue){return src&&typeof src[attr]!=="undefined"&&src[attr]||defaultValue}})},{}]},{},[8])(8)});